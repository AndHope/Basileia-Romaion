#
# Note: the triggers are checked at certain key points in the code, not all the time
# color_key = {
#    color = "black"      # the map color
#    possible = { ... }   # the trigger to enable this color
# }
#

# Example
#dynamic_map_color_swedish_junta = {
#    color = "black"
#
#	possible = {
#		exists = c:SWE # you /must/ check that a tag exists before doing anything else
#		c:SWE ?= THIS
#
#        exists = ig:ig_armed_forces
#        ig:ig_armed_forces ?= {
#            is_in_government = yes
#        }
#	}
#}

kalmar_union = {
	color = "kalmar_orange"

	possible = {
		exists = c:SCA
		c:SCA ?= THIS
		has_law = law_type:law_monarchy
		ruler = {
			has_culture = cu:danish
		}
	}
}

fennoscandia = {
	color = "finnish_brown"

	possible = {
		exists = c:SCA
		c:SCA ?= THIS
		has_law = law_type:law_monarchy
		ruler = {
			has_culture = cu:finnish
		}
	}
}

yellow_prussia = {
	color = "yellow"

	possible = {
		exists = c:PRU
		c:PRU ?= THIS
		has_law_or_variant = law_type:law_anarchy
	}
}

imperial_korea = {
	color = "korean_empire_purple"

	possible = {
		exists = c:KOR
		c:KOR ?= THIS
		has_law = law_type:law_monarchy
		has_variable = KOR_korean_empire_declared
	}
}

korea_monarchy_blue = {
	color = "joseon_blue"
	possible = {
		exists = c:KOR
		c:KOR ?= THIS
		has_law = law_type:law_monarchy
		NOT = {
			has_variable = KOR_korean_empire_declared
		}
	}
}

japanese_shogunate = {
	color = "tokugawa_green"
	possible = {
		exists = c:JAP
		c:JAP ?= THIS
		has_law = law_type:law_monarchy
		NOT = { has_variable = meiji_var }
	}
}

united_netherlands = {
	color = "united_netherlands_orange"
	possible = {
		exists = c:NET
		c:NET ?= THIS
		owns_entire_state_region = STATE_FLANDERS
		owns_entire_state_region = STATE_WALLONIA
	}
}
dark_khmer = {
	color = "khmer_green"
	possible = {
		exists = c:CAM
		c:CAM ?= THIS
		NOT = { is_country_type = unrecognized }
	}
}

communist_austria = {
	color = "communist_austria_red"

	possible = {
		OR = {
			c:AUS ?= this
			c:KUK ?= this
		}
		has_law_or_variant = law_type:law_council_republic
	}
}

imperial_japan = {
	color = "white"

	possible = {
		exists = c:JAP
		c:JAP ?= THIS
		has_global_variable = meiji_restoration_complete
		OR = {
			coa_absolute_monarchy_trigger = yes
			coa_dictatorship_trigger = yes
			coa_fascist_trigger = yes
			coa_military_trigger = yes
		}
	}
}

soviet_red = {
	color = "red_dark"

	possible = {
		exists = c:RUS
		c:RUS ?= THIS
		has_law_or_variant = law_type:law_council_republic
	}
}

communist_china = {
	color = "communist_china_red"
	possible = {
		OR = {
			AND = {
				exists = c:CHI
				c:CHI ?= THIS
			}
			AND = {
				exists = c:BEI
				c:BEI ?= THIS
			}
		}
		has_law_or_variant = law_type:law_council_republic
	}
}

republican_china = { # Beiyang Government stays yellow
	color = "azure"

	possible = {
		exists = c:CHI
		c:CHI ?= THIS
		OR = {
			has_law_or_variant = law_type:law_parliamentary_republic
			has_law_or_variant = law_type:law_presidential_republic
		}
	}
}

unpleasant_germany = {
	color = "feldgrau"

	possible = {
		exists = c:GER
		c:GER ?= THIS
		coa_fascist_trigger = yes
	}
}

communist_germany = {
    color = "communist_germany_red"

	possible = {
		exists = c:GER
		c:GER ?= THIS
		has_law_or_variant = law_type:law_council_republic
	}
}

ddr_germany = {
	color = "DDR_green"

	possible = {
		exists = c:GER
		c:GER ?= THIS
		OR = {
			AND = {
				has_law_or_variant = law_type:law_single_party_state
				py:communist_party ?= {
					any_member = {
						is_in_government = yes
					}
				}
			}
			AND = {
				OR = {
					has_law_or_variant = law_type:law_autocracy
					has_law_or_variant = law_type:law_technocracy
					has_law_or_variant = law_type:law_oligarchy
				}
				any_scope_character = {
					is_ruler = yes
					OR = {
						has_ideology = ideology:ideology_communist
						has_ideology = ideology:ideology_vanguardist
						has_ideology = ideology:ideology_anarchist
					}
				}
			}
			AND = {
				is_subject = yes
				overlord = {
					has_law_or_variant = law_type:law_council_republic
				}
			}
		}
		OR = {
			has_law_or_variant = law_type:law_parliamentary_republic
			has_law_or_variant = law_type:law_presidential_republic
		}
	}
}

roman_rome = {
	color = "roman_red"

	possible = {
		OR = {
			c:PAP ?= this
			was_formed_from = PAP
		}
		OR = {
			has_law_or_variant = law_type:law_parliamentary_republic
			has_law_or_variant = law_type:law_presidential_republic
			has_law_or_variant = law_type:law_council_republic
		}
	}
}

republican_france = {
	color = "revolutionary_blue"

	possible = {
		exists = c:FRA
		c:FRA ?= THIS
		NOT = { has_law_or_variant = law_type:law_autocracy }
		OR = {
			has_law_or_variant = law_type:law_parliamentary_republic
			has_law_or_variant = law_type:law_presidential_republic
		}
	}
}

commune_france = {
	color = "communist_france_red"

	possible = {
		exists = c:FRA
		c:FRA ?= THIS
		has_law_or_variant = law_type:law_council_republic
	}
}

empire_france = {
	color = "bonapartist_blue"

	possible = {
		exists = c:FRA
		c:FRA ?= THIS
		has_law = law_type:law_monarchy
		has_variable = bonapartist_restoration_var
		has_variable = one_true_french_dynasty
	}
}

hindu_india = {
	color = "orange_india"

	possible = {
		exists = c:BHT
		c:BHT ?= THIS
		country_has_state_religion = rel:hindu
		OR = {
			has_law_or_variant = law_type:law_state_religion
			has_law_or_variant = law_type:law_freedom_of_conscience
		}
	}
}

muslim_india = {
	color = "green_india"

	possible = {
		exists = c:BHT
		c:BHT ?= THIS
		OR = {
			country_has_state_religion = rel:shiite
			country_has_state_religion = rel:sunni
		}
		OR = {
			has_law_or_variant = law_type:law_state_religion
			has_law_or_variant = law_type:law_freedom_of_conscience
		}
	}
}

sikh_india = {
	color = "blue_india"

	possible = {
		exists = c:BHT
		c:BHT ?= THIS
		country_has_state_religion = rel:sikh
		OR = {
			has_law_or_variant = law_type:law_state_religion
			has_law_or_variant = law_type:law_freedom_of_conscience
		}
	}
}

republican_hindustan = {
	color = "hoi4_pakistan_blue"

	possible = {
		exists = c:HND
		c:HND ?= THIS
		OR = {
			has_law_or_variant = law_type:law_parliamentary_republic
			has_law_or_variant = law_type:law_presidential_republic
			has_law_or_variant = law_type:law_council_republic
		}
	}
}

nihilist_russia = {
	color = "nihilist_russia_color"

	possible = {
		exists = c:RUS
		c:RUS ?= THIS
		has_law_or_variant = law_type:law_state_atheism
		ruler = {
			has_ideology = ideology:ideology_nihilist
		}
	}
}

nihilist_germany = {
	color = "nihilist_germany_color"

	possible = {
		exists = c:GER
		c:GER ?= THIS
		has_law_or_variant = law_type:law_state_atheism
		ruler = {
			has_ideology = ideology:ideology_nihilist
		}
	}
}

generic_black_anarchist = {
	color = "black"

	possible = {
		OR = {
			is_revolutionary = yes
			is_secessionist = yes
		}
		coa_anarchy_trigger = yes
	}
}

generic_red_communist = {
	color = "red"

	possible = {
		OR = {
			is_revolutionary = yes
			is_secessionist = yes
		}
		coa_communist_trigger = yes
		NOT = {
			coa_anarchy_trigger = yes
		}
	}
}


hre_atheist = {
	color = "sacrilegious_blue"

	possible = {
		exists = c:HRE
		c:HRE ?= THIS
		OR = {
			has_law = law_type:law_monarchy
			has_law_or_variant = law_type:law_theocracy
		}
		has_law_or_variant = law_type:law_state_atheism
	}
}
hre_republic = {
	color = "european_blue"

	possible = {
		exists = c:HRE
		THIS = c:HRE
		OR = {
			has_law_or_variant = law_type:law_parliamentary_republic
			has_law_or_variant = law_type:law_presidential_republic
		}
		NOT = {
			has_law_or_variant = law_type:law_technocracy
		}
		NOT = {
			coa_fascist_trigger = yes
		}
	}
}

hre_technate = {
	color = "technate_grey"

	possible = {
		exists = c:HRE
		THIS = c:HRE
		OR = {
			has_law_or_variant = law_type:law_parliamentary_republic
			has_law_or_variant = law_type:law_presidential_republic
		}
		has_law_or_variant = law_type:law_technocracy
	}
}

hre_communist = {
	color = "communist_hre_red"

	possible = {
		exists = c:HRE
		THIS = c:HRE
		has_law_or_variant = law_type:law_council_republic
	}
}

hre_fascist = {
	color = "paneuropa_grey"

	possible = {
		exists = c:HRE
		THIS = c:HRE
		coa_fascist_trigger = yes
		NOT = {
			has_law_or_variant = law_type:law_council_republic
		}
	}
}

plc_pink = {
	color = "plc_pink"
	possible = {
		exists = c:PLC
		THIS = c:PLC
		has_variable = greater_commonwealth_var
	}
}

venetian_teal = {
	color = "venice_teal"

	possible = {
		c:VEN ?= this
		OR = {
			has_law_or_variant = law_type:law_parliamentary_republic
			has_law_or_variant = law_type:law_presidential_republic
		}
	}
}

illyria_colour = {
	color = "illyria_teal"

	possible = {
		c:YUG ?= this
		OR = {
			country_has_state_religion = rel:catholic
			was_formed_from = CRO
			was_formed_from = SLO
		}
	}
}

greater_yugoslavia = {
	color = "bulgaria_yugoslavia_green"

	possible = {
		c:YUG ?= this
		was_formed_from = BUL
	}
}

bulgarian_empire = {
	color = "bulgaria_purple"

	possible = {
		c:BUL ?= this
		has_variable = bul_proclaimed_bulgarian_empire
		has_law = law_type:law_monarchy
	}
}

iberia_communist = {
	color = "communist_iberia_pink"

	possible = {
		c:IBE ?= this
		has_law_or_variant = law_type:law_council_republic
		NOT = {
			has_variable = esperantia_var
		}
	}
}

iberia_republic = {
	color = "iberian_republic_purple"

	possible = {
		c:IBE ?= this
		OR = {
			has_law_or_variant = law_type:law_presidential_republic
			has_law_or_variant = law_type:law_parliamentary_republic
		}
	}
}

iberia_corporate_state = {
	color = "iberian_union_beige"

	possible = {
		c:IBE ?= this
		has_law_or_variant = law_type:law_corporate_state
		NAND = {
			any_primary_culture = { # Only one primary culture
				count = 1
			}
			country_has_primary_culture = cu:iberian
		}
	}
}

iberia_concordat = {
	color = "iberian_concordat_white"

	possible = {
		c:IBE ?= this
		has_law_or_variant = law_type:law_theocracy
	}
}

iberia_esperanto = {
	color = "esperanto_green"

	possible = {
		any_primary_culture = { # Only one primary culture
			count = 1
		}
		country_has_primary_culture = cu:iberian
		has_variable = esperantia_var
	}
}
