tge_remove_devotion_modifiers_effect = {
	if = {
		limit = {
			has_modifier = modifier_tge_tezcatlipoca
		}
		remove_modifier = modifier_tge_tezcatlipoca
	}
	if = {
		limit = {
			has_modifier = modifier_tge_tlaloc
		}
		remove_modifier = modifier_tge_tlaloc
	}
	if = {
		limit = {
			has_modifier = modifier_tge_quetzalcoatl
		}
		remove_modifier = modifier_tge_quetzalcoatl
	}
	if = {
		limit = {
			has_modifier = modifier_tge_huitzilopochtli
		}
		remove_modifier = modifier_tge_huitzilopochtli
	}
}

tge_cleanup_tonalism_effect = {
	hidden_effect = {
		remove_variable = tge_tonalli_var
		remove_variable = tge_tonalli_progress_var
		remove_variable = tge_tonalli_diety_var
		remove_variable = tge_selecting_deity_var
		remove_variable = tge_deity_cooldown_var
		tge_remove_devotion_modifiers_effect = yes
		remove_modifier = modifier_tge_ritual_bloodletting
	}
}

tge_weekly_tonalism_effect = {
	set_variable = {
		name = tge_tonalli_progress_var
		value = tge_tonalli_progress_value
	}
	change_variable = {
		name = tge_tonalli_var
		add = var:tge_tonalli_progress_var
	}
	clamp_variable = {
		name = tge_tonalli_var
		max = 1000
		min = 0
	}
	scope:journal_entry = {
		set_bar_progress = {
			name = tge_tonalism_progressbar
			value = var:tge_tonalli_var
		}
	}
}