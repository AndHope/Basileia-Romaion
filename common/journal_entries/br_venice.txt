# Consolidate the Stato Da Már
je_br_consolidate_stato_da_mar = { 
    group = je_group_internal_affairs
    icon = "gfx/interface/icons/event_icons/force_recognition.dds"

	should_be_pinned_by_default = yes
    weight = 100
    can_revolution_inherit = yes

    is_shown_in_lobby = {
        c:VEN ?= this
    }

    scripted_progress_bar = br_venice_consolidate_progress_bar

    complete = {
        OR = {
            # Completion via progress bar
            custom_tooltip = { 
                text = je_br_consolidate_progress_complete_tt
                AND = { # AND block in place in case I want to add other conditions.
                    scope:journal_entry = {
                        has_variable = atlantica_consolidation_progress
                        var:atlantica_consolidation_progress >= 100
                    }
                }
            }
            # Completion via direct annexation
            custom_tooltip = {
                text = je_br_consolidate_annexation_complete_tt
                AND = {
                    has_state_in_state_region = STATE_CUBA # Atlanteum
                    has_state_in_state_region = STATE_BAHAMAS # Lucayanateum
                    has_state_in_state_region = STATE_FLORIDA # Nóva Veneto
                    NOT = { exists = c:br_atlantica } # If Atlantica doesn't exist ## determine how to display this in the journal entry
                }
            }
        }
    }
    on_complete = {
        if = {
            limit = { 
                has_state_in_state_region = STATE_CUBA # Atlanteum
                has_state_in_state_region = STATE_BAHAMAS # Lucayanateum
                has_state_in_state_region = STATE_FLORIDA # Nóva Veneto
                NOT = { exists = c:br_atlantica } # If Atlantica doesn't exist
            }
            # Completion via direct annexation
            trigger_event = {
                id = br_venice_consolidate_atlantica.100 # TBW
            }
        }
        else = {
        # Progress bar completion path
        trigger_event = { 
            id = br_venice_consolidate_atlantica.99 #TBW
            }
        }
    }

    fail = {
        OR = {
            AND = {
                exists = c:br_atlantica
                    c:br_atlantica = {
                        liberty_desire >= 100
                    }
                }
            AND = {
                exists = c:br_atlantica
                NOT = {
                    c:br_atlantica = {
                        is_subject_of = ROOT
                    }
                }
            }
        }
    }

    on_fail = { 
        trigger_event = { 
            id = br_venice_consolidate_atlantica.101 ## TBW, will start a revolution play against Venice from Atlantica
        }
    }

    timeout = 7300

    on_timeout = {
        trigger_event = {
            id = br_venice_consolidate_atlantica.102 ## TBW, permanent instability modifier, failed consolidation
        }
    }
}