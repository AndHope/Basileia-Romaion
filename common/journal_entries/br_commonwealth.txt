br_je_plc_succession = {
    icon = "gfx/interface/icons/event_icons/event_military.dds"

	group = je_group_internal_affairs

    scripted_progress_bar = br_plc_sucession_reform_progress_bar

    modifiers_while_active = {
        br_modifier_liberum_veto
    }

    is_shown_in_lobby = {
		c:PLC ?= this
	}

    immediate = {
        ruler = {
            set_character_immortal = yes
        }
        br_calc_given_ig_clout = {
            ig = ig:ig_intelligentsia
            result_var = br_plc_succession_intelligentsia_clout_var
        }

        #Update reform support var's
        #because the je scope can't be scoped to directly in the immediate block
        br_plc_succession_update_reform_support_vars_when_je_scope_not_init = yes
    }

    on_monthly_pulse = {
        effect = {
            br_calc_given_ig_clout = {
                ig = ig:ig_intelligentsia
                result_var = br_plc_succession_intelligentsia_clout_var
            }

            #Update reform support var's
            br_plc_succession_update_reform_support_vars = yes
        }
    }

    timeout = 1825

    on_timeout = {
        ruler = {
            kill_character = yes
        }
        br_plc_succession_add_reform_support_modifier = yes
        trigger_event = {
            id = br_plc_succession_events.1
            popup = yes
        }
        add_journal_entry = {
            type = br_je_plc_reform_main
        }
	}

    weight = 100
	should_be_pinned_by_default = yes
}

je_eastern_resistance = {
    icon = "gfx/interface/icons/event_icons/event_military.dds"
    
	group = je_group_internal_affairs

    modifiers_while_active = {
        br_modifier_eastern_oppression
    }

    is_shown_in_lobby = {
		c:PLC ?= this
	}
	
    is_shown_when_inactive = {
        exists = c:PLC
        c:PLC = root
    }

    possible = {
        exists = c:PLC
        c:PLC = root
        owns_entire_state_region = STATE_KIEV
    }

    complete = { 
        NOT = { 
            has_law_or_variant = law_type:law_serfdom
        }
        NOT = {  country_has_primary_culture = cu:ukrainian }
    }  

    fail = {
        any_country = { 	
            is_secessionist = yes
            is_diplomatic_play_target = yes
            OR = {
                country_has_primary_culture = cu:ukrainian
            }
        }
    }

    on_fail = {
        trigger_event = {
            id = poland.5
            days = 21
        }
    }

    on_complete = {
        trigger_event = {
            id = poland.6
        }
    }

    weight = 100
	should_be_pinned_by_default = yes
}

#########################################################################################################################
###
### PLC reform JE's
###
#########################################################################################################################
#Two Reform Paths with associated reform journals for it based on the “Tanzimat” reforms of base game Ottoman Empire
#A Jadwigan reforms route vs a modarate reforms route
br_je_plc_reform_main = {
    icon = "gfx/interface/icons/event_icons/event_military.dds"

	group = je_group_internal_affairs

    scripted_progress_bar = br_je_plc_reform_main_progress_bar

	is_shown_in_lobby = {
		c:PLC ?= THIS
    }

    immediate = {
        #set variables
        set_variable = {
			name = br_plc_reform_total_nr_of_completed_je_var
			value = 0
		}
        set_variable = {
			name = br_plc_reform_nr_of_completed_jadwigan_reform_je_var
			value = 0
		}
        set_variable = {
			name = br_plc_reform_nr_of_completed_moderate_reform_je_var
			value = 0
		}

        #Add sub journals
        add_journal_entry = {
            type = br_je_plc_jadwigan_reform_1
        }
    }

	complete = {
		br_plc_reform_has_completed_all_jadwigan_reforms = yes
	}

	on_complete = {
		# TODO
	}

    fail = {
        br_plc_reform_has_completed_all_moderate_reforms = yes
    }

    event_outcome_failed_desc = {
			first_valid = {
				triggered_desc = {
					desc = holstein_is_annexed
					trigger = {
						exists = c:HRE
					}
				}
			}
		}	

	timeout = 10950

	on_timeout = {
	}

	weight = 10000

	should_be_pinned_by_default = yes
}

###
### Jadwigan reforms JE
###

#Jadwigan Reforms: Memories of the Slavic Slave Trade
br_je_plc_jadwigan_reform_1 = {
    icon = "gfx/interface/icons/event_icons/event_military.dds"

	group = je_group_internal_affairs

	# is_shown_in_lobby = {}    #shoudn't be shown in lobby

    immediate = {
    }

	complete = {
		has_law_or_variant = law_type:law_homesteading
	}

	on_complete = {
		remove_modifier = br_modifier_the_issue_of_serfdom
        add_modifier = br_modifier_plc_reform_jadwigan_land_reforms
        br_plc_reform_increase_jadwigan_progress = yes
	}

    fail = {
        je:br_je_plc_reform_main ?= {
			"scripted_bar_progress(br_je_plc_reform_main_progress_bar)" <= 0
		}
    }

	timeout = 10950

	on_timeout = {
	}

	weight = 5000
}