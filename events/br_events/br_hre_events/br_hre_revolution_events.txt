namespace = hre_revolution_events

# The revolution looms
hre_revolution_events.1 = {
	type = country_event
	placement = root
	title = hre_revolution_events.1.t
	desc = hre_revolution_events.1.d
	flavor = hre_revolution_events.1.f

	duration = 3

	event_image = {
		video = "gfx/event_pictures/europenorthamerica_political_extremism.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/middleeast/courtroom_upheaval"
	icon = "gfx/interface/icons/event_icons/event_protest.dds"

	trigger = {
	}

	immediate = {

	}

	option = {
		name = hre_revolution_events.1.a
		default_option = yes

		show_as_tooltip = {
			add_journal_entry = {
				type = je_revolution_reform
			}
			add_journal_entry = {
				type = je_revolution_suppress
			}
		}
	}
}

# The revolution erupts
# hre_revolution_events.2 = {

# 	type = country_event
# 	event_image = {
# 		video = "gfx/event_pictures/unspecific_signed_contract.bk2"
# 	}

# 	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
# 	on_opened_soundeffect = "event:/SFX/Events/unspecific/world_fair"

# 	icon = "gfx/interface/icons/event_icons/event_protest.dds"

# 	title = hre_revolution_events.2.t
# 	desc = hre_revolution_events.2.d
# 	flavor = hre_revolution_events.2.f

# 	duration = 3

# 	immediate = {
# 		set_variable = br_impending_revolution_complete_var
# 	}

# 	option = {
# 		name = hre_revolution_events.2.a
# 		default_option = yes

# 		add_modifier = {
# 			name = br_modifier_vive_la_revolution
# 			years = -1
# 		}
# 		add_modifier = {
# 			name = br_modifier_roman_republicanism
# 			years = -1
# 		}
# 		remove_modifier = br_modifier_holy_roman_emperor
# 		remove_modifier = br_modifier_noble_privileges
# 		remove_modifier = br_modifier_feudalism
# 		activate_law = law_type:law_presidential_republic
# 		activate_law = law_type:law_wealth_voting #or anarchy
# 		activate_law = law_type:law_tenant_farmers
		
# 		add_journal_entry = {
# 			type = je_national_identity
# 		}
# 	}
# }

# The revolution is prevented thru reform
hre_revolution_events.3 = {

	type = country_event
	
	event_image = {
		video = "gfx/event_pictures/europenorthamerica_before_the_battle.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/unspecific/world_fair"
	icon = "gfx/interface/icons/event_icons/event_protest.dds"

	title = hre_revolution_events.3.t
	desc = hre_revolution_events.3.d
	flavor = hre_revolution_events.3.f

	duration = 3

	immediate = {
		br_impending_revolution_complete_scripted_effect = yes
	}

	option = {
		name = hre_revolution_events.3.a
		default_option = yes
		
		show_as_tooltip = {
			add_modifier = {
				name = br_modifier_peoples_monarchy
				years = -1
			}
			#remove_modifier = br_modifier_noble_privileges
		}
	}
}

# The revolution is suppressed
hre_revolution_events.4 = {

	type = country_event
	
	event_image = {
		video = "gfx/event_pictures/unspecific_military_parade.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/unspecific/world_fair"
	icon = "gfx/interface/icons/event_icons/event_protest.dds"

	title = hre_revolution_events.4.t
	desc = hre_revolution_events.4.d
	flavor = hre_revolution_events.4.f

	duration = 3

	immediate = {
		br_impending_revolution_complete_scripted_effect = yes
	}

	option = {
		name = hre_revolution_events.4.a
		default_option = yes
		
		show_as_tooltip = {
			add_modifier = {
				name = br_modifier_heir_of_augustus
				years = -1
			}
			#remove_modifier = br_modifier_noble_privileges
		}
	}
}

# Low food security
hre_revolution_events.5 = {

	type = country_event
	
	event_image = {
		video = "gfx/event_pictures/europenorthamerica_russian_serfs.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/unspecific/world_fair"
	icon = "gfx/interface/icons/event_icons/food.dds"

	title = hre_revolution_events.5.t
	desc = hre_revolution_events.5.d
	flavor = hre_revolution_events.5.f

	duration = 3

	immediate = {
		#timeout var
		set_variable = {
			name = br_hre_impending_revolution_low_food_security_timeout_var
			days = br_medium_timeout_duration_value
		}

		#flag var
		br_set_impending_revolution_pulse_event_cooldown = yes
	}

	option = {
		name = hre_revolution_events.5.a
		default_option = yes
		
		br_specific_change_in_revolutionary_tension_effect = {
			value = br_medium_increase_in_revolutionary_tension_value
		}
		br_specific_change_in_3de_estate_disatisfaction_effect = {
			value = br_medium_increase_in_estate_disatisfaction_value
		}
	}
}

# Bandits room the countryside
hre_revolution_events.6 = {

	type = country_event
	
	event_image = {
		video = "gfx/event_pictures/rp1_social_banditry.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/unspecific/world_fair"
	icon = "gfx/interface/icons/event_icons/event_protest.dds"

	title = hre_revolution_events.6.t
	desc = hre_revolution_events.6.d
	flavor = hre_revolution_events.6.f

	duration = 3

	immediate = {
		#timeout var
		set_variable = {
			name = br_hre_impending_revolution_bandits_timeout_var
			days = br_medium_timeout_duration_value
		}

		#flag var
		set_variable = br_hre_impending_revolution_bandits_var
		br_set_impending_revolution_pulse_event_cooldown = yes
	}

	option = {
		name = hre_revolution_events.6.a
		default_option = yes
		
		br_specific_change_in_revolutionary_tension_effect = {
			value = br_medium_increase_in_revolutionary_tension_value
		}
		br_specific_change_in_3de_estate_disatisfaction_effect = {
			value = br_medium_increase_in_estate_disatisfaction_value
		}
	}
}

# 3de estate forms mititias
hre_revolution_events.7 = {

	type = country_event
	
	event_image = {
		video = "gfx/event_pictures/europenorthamerica_springtime_of_nations.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/unspecific/world_fair"
	icon = "gfx/interface/icons/event_icons/event_protest.dds"

	title = hre_revolution_events.7.t
	desc = hre_revolution_events.7.d
	flavor = hre_revolution_events.7.f

	duration = 3

	immediate = {
		#timeout var
		set_variable = {
			name = br_hre_impending_revolution_militias_form_timeout_var
			days = br_large_timeout_duration_value
		}

		#flag var
		set_variable = br_hre_impending_revolution_mititias_formed_var
		br_set_impending_revolution_pulse_event_cooldown = yes
	}

	option = {
		name = hre_revolution_events.7.a
		default_option = yes
		
		br_specific_change_in_revolutionary_tension_effect = {
			value = br_medium_increase_in_revolutionary_tension_value
		}
		br_specific_change_in_3de_estate_disatisfaction_effect = {
			value = br_medium_increase_in_estate_disatisfaction_value
		}
	}
}

# 3de estate mititias raid arms depots
hre_revolution_events.8 = {

	type = country_event
	
	event_image = {
		video = "gfx/event_pictures/europenorthamerica_springtime_of_nations.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/unspecific/world_fair"
	icon = "gfx/interface/icons/event_icons/event_protest.dds"

	title = hre_revolution_events.8.t
	desc = hre_revolution_events.8.d
	flavor = hre_revolution_events.8.f

	duration = 3

	immediate = {
		#timeout var
		set_variable = {
			name = br_hre_impending_revolution_arms_depots_raided_timeout_var
			days = br_medium_timeout_duration_value
		}

		#flag var
		set_variable = br_hre_impending_revolution_arms_depots_raided_var
		br_set_impending_revolution_pulse_event_cooldown = yes
	}

	option = {
		name = hre_revolution_events.8.a
		default_option = yes
		
		br_specific_change_in_revolutionary_tension_effect = {
			value = br_large_increase_in_revolutionary_tension_value
		}
		br_specific_change_in_3de_estate_disatisfaction_effect = {
			value = br_large_increase_in_estate_disatisfaction_value
		}
	}
}

# Build a statue of the Monarch
#this is simply a adjusted copy of the vanilla event "character_events.5 #A statue made of the king"
hre_revolution_events.9 = { #A statue made of the king
	type = country_event
	placement = scope:br_statue_state

	title = hre_revolution_events.9.t
	desc = hre_revolution_events.9.d
	flavor = hre_revolution_events.9.f

	duration = 3

	# cooldown = { days = stupidly_long_modifier_time }

	gui_window = event_window_1char_tabloid

	left_icon = scope:br_statue_monarch

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/misc/1Character_Banner"

	icon = "gfx/interface/icons/event_icons/event_portrait.dds"

	immediate = {
		ruler = {
			save_scope_as = br_statue_monarch
		}
		random_scope_state = {
			limit = {
				is_incorporated = yes
				has_building = building_urban_center
				NOT = { has_variable = br_monarch_statue_var }
			}
			save_scope_as = br_statue_state
		}
	}

	cancellation_trigger = {
		OR = {
			NOT = {
				exists = scope:br_statue_monarch
			}
			scope:br_statue_monarch = {
				is_character_alive = no
			}
		}
	}

	option = { #Do it
		name = hre_revolution_events.9.a
		default_option = yes
		add_modifier = {
			name = modifier_statue_of_ruler #prestige
			days = normal_modifier_time
		}
		scope:br_statue_state = {
			set_variable = {
				name = br_monarch_statue_var
				days = normal_modifier_time
			}
			add_radicals_in_state = {
  				value = small_radicals
  			}
  			set_variable = {
  				name = fireworks_variable
  				value = yes
  				days = 5
  			}
		}
		
		#Supporters of pro feudalism approve of statue
		movement_type:br_movement_pro_feudalism = {
			every_influenced_interest_group = {
				limit = {
					law_stance = {
						law = law_type:law_monarchy
						value > neutral
					}
				}
				add_modifier = {
					name = modifier_ig_approve_of_statue
					days = normal_modifier_time
				}
			}
		}

		#Supporters of anti feudalism disapprove of statue
		movement_type:br_movement_anti_feudalism = {
			every_influenced_interest_group = {
				add_modifier = {
					name = modifier_ig_disapprove_of_statue
					days = normal_modifier_time
				}
			}
		}
	}
}

###
### Revolution Erupts Events
###

# Mob of the 3de estate storms the Royal residence (versail or palais de la cite)
hre_revolution_events.201 = {

	type = country_event

	gui_window = event_window_superevent_modern_full
	
	event_image = {
		video = "gfx/event_pictures/europenorthamerica_political_extremism.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/unspecific/world_fair"
	icon = "gfx/interface/icons/event_icons/event_protest.dds"

	title = hre_revolution_events.201.t
	desc = hre_revolution_events.201.d
	flavor = hre_revolution_events.201.f

	duration = 3

	immediate = {
	}

	option = {
		name = hre_revolution_events.201.a
		default_option = yes

		trigger_event = {
			id = hre_revolution_events.202
			popup = yes
		}
	}
}

# Emperor can chose to cooperate with the mob or resist
hre_revolution_events.202 = {

	type = country_event

	gui_window = event_window_superevent_modern_full
	
	event_image = {
		video = "gfx/event_pictures/europenorthamerica_political_extremism.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/unspecific/world_fair"
	icon = "gfx/interface/icons/event_icons/event_protest.dds"

	title = hre_revolution_events.202.t
	desc = hre_revolution_events.202.d
	flavor = hre_revolution_events.202.f

	duration = 3

	immediate = {
	}

	option = {
		name = hre_revolution_events.202.a

		trigger_event = {
			id = hre_revolution_events.203
			popup = yes
		}
	}
	option = {
		name = hre_revolution_events.202.b
		default_option = yes

		trigger_event = {
			id = hre_revolution_events.204
			popup = yes
		}
	}
}

# The emperor attempts to speak to the crowd
hre_revolution_events.203 = {

	type = country_event
	
	gui_window = event_window_superevent_modern_full

	event_image = {
		# video = "gfx/event_pictures/unspecific_ruler_speaking_to_people.bk2"
		video = "gfx/event_pictures/votp_agitator_speaking.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/unspecific/world_fair"
	icon = "gfx/interface/icons/event_icons/event_protest.dds"

	title = hre_revolution_events.203.t
	desc = hre_revolution_events.203.d
	flavor = hre_revolution_events.203.f

	duration = 3

	immediate = {
	}

	option = {
		name = hre_revolution_events.203.a
		default_option = yes

		#set the current imperial residence to the original one if it wasn't the same already
		if = {
			limit = {
				br_is_current_imperial_residence_original_scripted_trigger = no
			}
			trigger_event = {
				id = hre_revolution_events.205
				popup = yes
			}
		}
		else = {
			trigger_event = {
				id = hre_revolution_events.206
				popup = yes
			}
		}
	}
}

# The emperor orders the crowd dispersed
hre_revolution_events.204 = {

	type = country_event
	
	gui_window = event_window_superevent_modern_full

	event_image = {
		video = "gfx/event_pictures/votp_cops_march.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/unspecific/world_fair"
	icon = "gfx/interface/icons/event_icons/event_protest.dds"

	title = hre_revolution_events.204.t
	desc = hre_revolution_events.204.d
	flavor = hre_revolution_events.204.f

	duration = 3

	immediate = {
	}

	option = {
		name = hre_revolution_events.204.a
		default_option = yes

		#set the current imperial residence to the original one if it wasn't the same already
		if = {
			limit = {
				br_is_current_imperial_residence_original_scripted_trigger = no
			}
			trigger_event = {
				id = hre_revolution_events.205
				popup = yes
			}
		}
		else = {
			trigger_event = {
				id = hre_revolution_events.206
				popup = yes
			}
		}
	}
}

# If the Emperor lived in Versailles he and his familly are forced to move to palais de la cité in Paris (if the Emperor already lived there this event is skipped)
hre_revolution_events.205 = {

	type = country_event
	
	gui_window = event_window_superevent_modern_full

	event_image = {
		video = "gfx/event_pictures/europenorthamerica_london_center.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/unspecific/world_fair"
	icon = "gfx/interface/icons/event_icons/event_protest.dds"

	title = hre_revolution_events.205.t
	desc = hre_revolution_events.205.d
	flavor = hre_revolution_events.205.f

	duration = 3

	immediate = {
	}

	option = {
		name = hre_revolution_events.205.a
		default_option = yes

		#set the current imperial residence to the original one if it wasn't the same already
		if = {
			limit = {
				br_is_current_imperial_residence_original_scripted_trigger = no
			}
			br_set_current_imperial_residence_to_original_effect = yes
		}

		trigger_event = {
			id = hre_revolution_events.206
			popup = yes
		}
	}
}

# Emperor is put under house arrest
hre_revolution_events.206 = {

	type = country_event

	gui_window = event_window_superevent_modern_full
	
	event_image = {
		texture = "gfx/event_pictures/eocfm_backgrounds/eocfm_turkish_palace2.dds"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/unspecific/world_fair"
	icon = "gfx/interface/icons/event_icons/event_protest.dds"

	title = hre_revolution_events.206.t
	desc = hre_revolution_events.206.d
	flavor = hre_revolution_events.206.f

	duration = 3

	immediate = {
	}

	option = {
		name = hre_revolution_events.206.a
		default_option = yes

		trigger_event = {
			id = hre_revolution_events.207
			popup = yes
		}
	}
}

# A revolutionary council of the 3de estate conviens and drafts a constitution
hre_revolution_events.207 = {

	type = country_event

	gui_window = event_window_superevent_modern_full
	
	event_image = {
		video = "gfx/event_pictures/unspecific_politicians_arguing.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/unspecific/world_fair"
	icon = "gfx/interface/icons/event_icons/event_protest.dds"

	title = hre_revolution_events.207.t
	desc = hre_revolution_events.207.d
	flavor = hre_revolution_events.207.f

	duration = 3

	immediate = {
	}

	option = {
		name = hre_revolution_events.207.a
		default_option = yes
		custom_tooltip = br_revolution_errupts_warning_tt
		br_revolution_has_finished_errupting_scripted_effect = yes
	}
}


###
### Revolution looms reform and suppress pulse events
###
hre_revolution_events.500 = {
	type = country_event

	gui_window = event_window_superevent_modern_full
	
	event_image = {
		video = "gfx/event_pictures/unspecific_politicians_arguing.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/unspecific/world_fair"
	icon = "gfx/interface/icons/event_icons/event_protest.dds"

	title = hre_revolution_events.207.t
	desc = hre_revolution_events.207.d
	flavor = hre_revolution_events.207.f

	duration = 3

	immediate = {
	}

	option = {
		name = hre_revolution_events.207.a
		default_option = yes
		custom_tooltip = br_revolution_errupts_warning_tt
		br_revolution_has_finished_errupting_scripted_effect = yes
	}
}

#Food security has stabilized
hre_revolution_events.501 = {
	type = country_event

	gui_window = event_window_superevent_modern_full
	
	event_image = {
		video = "gfx/event_pictures/europenorthamerica_capitalists_meeting.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/unspecific/world_fair"
	icon = "gfx/interface/icons/event_icons/food.dds"

	title = hre_revolution_events.501.t
	desc = hre_revolution_events.501.d
	flavor = hre_revolution_events.501.f

	duration = 3

	immediate = {
	}

	option = {
		name = hre_revolution_events.501.a
		default_option = yes

		remove_modifier = br_modifier_unreliable_food_security
		
		br_specific_change_in_revolutionary_tension_effect = {
			value = br_large_decrease_in_revolutionary_tension_value
		}
		br_specific_change_in_1de_estate_disatisfaction_effect = {
			value = br_small_decrease_in_estate_disatisfaction_value
		}
		br_specific_change_in_2de_estate_disatisfaction_effect = {
			value = br_medium_decrease_in_estate_disatisfaction_value
		}
		br_specific_change_in_3de_estate_disatisfaction_effect = {
			value = br_large_decrease_in_estate_disatisfaction_value
		}
	}
}

#Regime has become popular
hre_revolution_events.502 = {
	type = country_event

	gui_window = event_window_superevent_modern_full
	
	event_image = {
		video = "gfx/event_pictures/votp_monarch_holding_court.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/unspecific/world_fair"
	icon = "gfx/interface/icons/event_icons/event_mitre.dds"

	title = hre_revolution_events.502.t
	desc = hre_revolution_events.502.d
	flavor = hre_revolution_events.502.f

	duration = 3

	immediate = {
	}

	option = {
		name = hre_revolution_events.502.a
		default_option = yes

		remove_modifier = br_modifier_unpopular_regime
		
		br_specific_change_in_revolutionary_tension_effect = {
			value = br_large_decrease_in_revolutionary_tension_value
		}
		br_specific_change_in_1de_estate_disatisfaction_effect = {
			value = br_large_decrease_in_estate_disatisfaction_value
		}
		br_specific_change_in_2de_estate_disatisfaction_effect = {
			value = br_large_decrease_in_estate_disatisfaction_value
		}
		br_specific_change_in_3de_estate_disatisfaction_effect = {
			value = br_large_decrease_in_estate_disatisfaction_value
		}
	}
}